---  # Apache Jena & Fuseki triple store
version: '3'
services:
  graphdb:
    image: khaller/graphdb-free
    container_name: graphdb
    environment:
      - GDB_HEAP_SIZE=3g
    volumes:
      - ./ontology:/opt/graphdb/ontology
      - ./config/graphdb:/opt/graphdb/conf
      # ./databases:/opt/graphdb/data/repositories
    ports:
      - 7200:7200
  pad_api:
    build:
      context: .
      dockerfile: ./pad_api/Dockerfile
    container_name: pad_api
    volumes:
      - ./config:/app/config
    environment:
      - APP_ENVIRONMENT=develop
      - APP_HOST=0.0.0.0
      - APP_PORT=5001
      - APP_SPARQL_HOST=http://graphdb:7200
      - APP_SPARQL_QUERY_PATH=/repositories/job
      - APP_SPARQL_UPDATE_PATH=/repositories/job/statements
    ports:
      - 5001:5001
